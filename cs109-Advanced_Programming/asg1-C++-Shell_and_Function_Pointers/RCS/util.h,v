head	1.5;
access;
symbols;
locks;
comment	@ * @;


1.5
date	2011.01.19.17.26.15;	author dmfrank;	state -;
branches;
next	1.4;

1.4
date	2011.01.18.14.40.34;	author dmfrank;	state -;
branches;
next	1.3;

1.3
date	2011.01.18.13.41.45;	author dmfrank;	state -;
branches;
next	1.2;

1.2
date	2010.12.16.06.35.25;	author dmfrank;	state -;
branches;
next	1.1;

1.1
date	2010.12.16.06.28.54;	author dmfrank;	state -;
branches;
next	;


desc
@@


1.5
log
@-
@
text
@/* $Id: util.h,v 1.6 2011-01-19 04:53:29-08 dmfrank - $
 * Derek Frank, dmfrank@@ucsc.edu
 *
 * util
 *   A utility class to provide various services not conveniently
 *   included in other modules.
 */

#ifndef __UTIL_H__
#define __UTIL_H__

#include <iostream>
#include <string>
#include <vector>

#ifdef __GNUC__
#include <stdexcept>
#endif

using namespace std;

#include "trace.h"

//
// A couple of convenient typedefs to allow brevity of code elsewhere.
//

typedef vector<string> wordvec;
typedef wordvec::const_iterator wordvec_itor;

//
// str2int
//    Convert a string to an int.
//
// * Written by Welsey Mackey in str2int.cc.
//
int str2int (const string &number);

//
// yshell_exn -
//    Extend runtime_error for throwing exceptions related to this
//    program.
//

class yshell_exn: public runtime_error {
   public:
      explicit yshell_exn (const string &what);
};

//
// setexecname -
//    Sets the static string to be used as an execname.
// execname -
//    Returns the basename of the executable image, which is used in
//    printing error messags.
//

void setexecname (const string &);
string &execname();

//
// want_echo -
//    We want to echo all of cin to cout if either cin or cout
//    is not a tty.  This helps make batch processing easier by
//    making cout look like a terminal session trace.
//

bool want_echo();

//
// exit_status -
//    A static class for maintaining the exit status.  The default
//    status is EXIT_SUCCESS (0), but can be set to another value,
//    such as EXIT_FAILURE (1) to indicate that error messages have
//    been printed.
//

class exit_status {
   private:
      static int status;
   public:
      static void set (int);
      static int get();
};

//
// split -
//    Split a string into a wordvec (as defined above).  Any sequence
//    of chars in the delimiter string is used as a separator.  To
//    Split a pathname, use "/".  To split a shell command, use " ".
//

wordvec split (const string &line, const string &delimiter);

// complain -
//    Used for starting error messages.  Sets the exit status to
//    EXIT_FAILURE, writes the program name to cerr, and then
//    returns the cerr ostream.  Example:
//       complain() << filename << ": some problem" << endl;
//

ostream &complain();

//
// operator<< (vector) -
//    An overloaded template operator which allows vectors to be
//    printed out as a single operator, each element separated from
//    the next with spaces.  The item_t must have an output operator
//    defined for it.
//

template <typename item_t>
ostream &operator<< (ostream &out, const vector<item_t> &vec);

//
// Put the RCS Id string in the object file.
//

#endif

@


1.4
log
@-
@
text
@d1 1
a1 1
/* $Id: util.h,v 1.2 2011-01-17 14:46:04-08 dmfrank - $
d32 8
@


1.3
log
@-
@
text
@d4 1
a4 1
 * util -
@


1.2
log
@-
@
text
@d1 7
a7 8
// $Id: util.h,v 1.1 2010-12-15 22:28:54-08 dmfrank - $
// Derek Frank, dmfrank@@ucsc.edu

//
// util -
//    A utility class to provide various services not conveniently
//    included in other modules.
//
d55 1
a55 1
//    We want to echo all of cin to cout if if either cin or cout
@


1.1
log
@-
@
text
@d1 2
a2 1
// $Id: util.h,v 1.3 2010-12-13 20:11:09-08 - - $
@
